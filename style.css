/* ---------- tokens ---------- */
:root{
  --gold:#f7d889; --gold-mul:1;
  --red:#a21414; --ink:#0b0b0b;
  --speed:1;
  --radius:16px;
  --safeB:env(safe-area-inset-bottom,16px);
  --safeS:env(safe-area-inset-left,16px);
  --safeE:env(safe-area-inset-right,16px);
  --mx:50; --my:50;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:#000;color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Noto Sans CJK TC",Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.zh{font-family:"PingFang TC","Noto Serif CJK TC",serif;letter-spacing:.06em}
.big{font-size:clamp(20px,5.2vw,28px);line-height:1.5}
:focus-visible{outline:2px solid var(--gold); outline-offset:3px}

/* ---------- CSS background ---------- */
.ink-bg{
  position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:
    radial-gradient(closest-side at 10% 15%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(closest-side at 85% 35%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(120px 120px at calc(var(--mx)*1%) calc(var(--my)*1%),
      rgba(255,255,255,.18), transparent 70%),
    conic-gradient(from 0deg at 20% 80%,
      rgba(247,216,137,calc(.35*var(--gold-mul))) 0 25%,
      transparent 25% 50%, rgba(247,216,137,calc(.25*var(--gold-mul))) 50% 75%,
      transparent 75%),
    conic-gradient(from 180deg at 80% 20%,
      rgba(247,216,137,calc(.3*var(--gold-mul))) 0 30%,
      transparent 30% 60%, rgba(247,216,137,calc(.24*var(--gold-mul))) 60% 80%,
      transparent 80%),
    conic-gradient(from 120deg at 40% 60%, #841010, #a21414 40%, #5a0b0b 70%, #841010),
    radial-gradient(120% 80% at 50% 100%, #250505, #0b0b0b);
  filter: contrast(1.05) saturate(1.05);
  animation: swirl calc(60s / var(--speed)) linear infinite;
  mask:
    radial-gradient(100% 120% at 0% 70%, #0000 30%, #000 55%),
    radial-gradient(120% 140% at 100% 30%, #0000 30%, #000 55%),
    radial-gradient(150% 120% at 50% -10%, #0000 40%, #000 65%);
}
@keyframes swirl{
  to { background-position:
    0 0,0 0,
    calc(200px*var(--speed)) calc(120px*var(--speed)),
    calc(-300px*var(--speed)) calc(80px*var(--speed)),
    calc(100px*var(--speed)) calc(-160px*var(--speed)),
    0 0,0 0;
  }
}
@media (prefers-reduced-motion: reduce){
  .ink-bg{animation:none}
}

/* ---------- layout ---------- */
.snap{height:100%; overflow-y:auto; scroll-snap-type:y mandatory}
.panel{position:relative; min-height:100dvh; scroll-snap-align:start;
  display:grid; place-items:center; isolation:isolate}
.panel::before{content:""; position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.7))}
.panel>*{position:relative}

.safe{width:min(720px, 92vw); padding:22px; padding-bottom:calc(22px + var(--safeB))}
.stack{display:flex; flex-direction:column; gap:18px; align-items:center; text-align:center}
.title{font-size:clamp(36px,9vw,56px); line-height:1.1; color:var(--gold);
  text-shadow:0 1px 0 #300, 0 2px 14px rgba(0,0,0,.6)}
.subtitle{opacity:.9}
.hint{opacity:.7; font-size:12px}

/* ---------- buttons ---------- */
.btn{border:none; padding:12px 18px; border-radius:999px; background:rgba(255,255,255,.12); color:#fff;
  backdrop-filter: blur(6px); border:1px solid rgba(255,255,255,.18)}
.btn.ghost{background:transparent; border:1px solid rgba(255,255,255,.3)}
.btn.primary{background:linear-gradient(135deg, #871212, #d31f1f); border:1px solid rgba(255,255,255,.25)}
.btn.xl{padding:16px 22px; font-size:18px}

/* ---------- flip card ---------- */
.card{width:min(680px,92vw); min-height:240px; perspective:1000px; position:relative}
.card .face{
  border-radius:var(--radius); padding:24px; background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.25); box-shadow:0 10px 30px rgba(0,0,0,.3);
  backface-visibility:hidden; transition:transform .8s cubic-bezier(.2,.7,.2,1), background .3s;
}
.card .front{display:grid; place-items:center; font-weight:600; color:var(--gold); min-height:240px}
.card .back{position:absolute; inset:0; transform:rotateY(180deg)}
.card.revealed .front{transform:rotateY(180deg)}
.card.revealed .back{transform:rotateY(360deg)}

/* ---------- photos & lightbox ---------- */
.photos{display:grid; grid-template-columns:repeat(3,1fr); gap:10px; padding-bottom:8px}
.photos img{width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:12px;
  border:1px solid rgba(255,255,255,.2); cursor:zoom-in}
dialog#lightbox{border:none; padding:0; background:rgba(0,0,0,.88)}
dialog[open]{display:grid; place-items:center}
dialog#lightbox img{max-width:92vw; max-height:68vh; border-radius:12px; margin:22px}
dialog#lightbox::backdrop{background:rgba(0,0,0,.65); backdrop-filter:blur(4px)}
#closeBox{margin:0 0 16px}

/* ---------- thumb toolbar ---------- */
.toolbar{
  position:fixed; left:var(--safeS); right:var(--safeE);
  bottom:0; z-index:20; display:grid; grid-template-columns:repeat(5,1fr);
  gap:8px; padding:10px; padding-bottom:calc(10px + var(--safeB));
  background:linear-gradient(180deg, transparent, rgba(0,0,0,.65));
  backdrop-filter: blur(8px);
}
.tbtn{
  -webkit-tap-highlight-color: transparent;
  font-size:14px; line-height:1; padding:14px 8px; border-radius:12px; border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08); color:#fff
}
.tbtn:active{transform:translateY(1px)}

/* ---------- bottom sheet ---------- */
.sheet{
  position:fixed; left:0; right:0; bottom:-100%; z-index:30;
  background:rgba(10,10,10,.95); border-radius:18px 18px 0 0;
  box-shadow:0 -12px 30px rgba(0,0,0,.4);
  transition:transform .35s ease; transform:translateY(100%);
}
.sheet.show{transform:translateY(0); bottom:0}
.sheet-head{display:flex; justify-content:space-between; align-items:center; padding:14px 16px}
.sheet-body{display:grid; gap:12px; padding:0 16px 16px 16px}
.sheet label{display:grid; gap:6px}
.sheet input[type="range"]{width:100%}
.row.small{grid-auto-flow:column; align-items:center}