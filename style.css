/* ---------- tokens ---------- */
:root{
  --gold: #f7d889;       /* tweak: base gold */
  --gold-mul: 1;         /* JS drives this via slider */
  --red: #a21414;
  --ink: #0b0b0b;
  --speed: 1;            /* JS drives via slider */
  --radius: 16px;
  --safe: env(safe-area-inset-bottom, 16px);
  --mx: 50; --my: 50;    /* pointer % for parallax / light sweep */
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:#000;color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Noto Sans CJK TC",Segoe UI,Roboto,Helvetica,Arial,sans-serif}
.zh{font-family:"PingFang TC","Noto Serif CJK TC",serif;letter-spacing:.06em}
.big{font-size:clamp(20px,5.2vw,28px);line-height:1.5}
:focus-visible{outline:2px solid var(--gold); outline-offset:3px}

/* ---------- CSS background ---------- */
.ink-bg{
  position:fixed; inset:0; pointer-events:none; z-index:-1;
  background:
    /* sparkles */
    radial-gradient(closest-side at 10% 15%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(closest-side at 85% 35%, rgba(255,255,255,.06), transparent 60%),
    /* light sweep following pointer */
    radial-gradient(120px 120px at calc(var(--mx)*1%) calc(var(--my)*1%),
      rgba(255,255,255,.18), transparent 70%),
    /* gold ribbons (animated) */
    conic-gradient(from 0deg at 20% 80%,
      rgba(247,216,137,calc(.35*var(--gold-mul))) 0 25%,
      transparent 25% 50%, rgba(247,216,137,calc(.25*var(--gold-mul))) 50% 75%,
      transparent 75%),
    conic-gradient(from 180deg at 80% 20%,
      rgba(247,216,137,calc(.3*var(--gold-mul))) 0 30%,
      transparent 30% 60%, rgba(247,216,137,calc(.24*var(--gold-mul))) 60% 80%,
      transparent 80%),
    /* deep red waves */
    conic-gradient(from 120deg at 40% 60%, #841010, #a21414 40%, #5a0b0b 70%, #841010),
    radial-gradient(120% 80% at 50% 100%, #250505, #0b0b0b);
  filter: contrast(1.05) saturate(1.05);
  animation: swirl calc(60s / var(--speed)) linear infinite;
  mask:
    /* carve organic clouds/waves with masks */
    radial-gradient(100% 120% at 0% 70%, #0000 30%, #000 55%),
    radial-gradient(120% 140% at 100% 30%, #0000 30%, #000 55%),
    radial-gradient(150% 120% at 50% -10%, #0000 40%, #000 65%);
  -webkit-mask-composite: source-over;
  mask-composite: add;
}
@keyframes swirl{
  to { background-position:
        0 0, 0 0,
        calc(200px*var(--speed)) calc(120px*var(--speed)),
        calc(-300px*var(--speed)) calc(80px*var(--speed)),
        calc(100px*var(--speed)) calc(-160px*var(--speed)),
        0 0, 0 0; 
      background-size:
        auto, auto, 
        400% 400%, 250% 250%, 200% 200%,
        cover, cover; }
}

/* ---------- layout ---------- */
.snap{height:100%; overflow-y:auto; scroll-snap-type:y mandatory}
.panel{position:relative; min-height:100dvh; scroll-snap-align:start;
  display:grid; place-items:center; isolation:isolate}
.panel::before{content:""; position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.7))}
.panel>*{position:relative}

.safe{width:min(720px, 92vw); padding:22px; padding-bottom:calc(22px + var(--safe))}
.stack{display:flex; flex-direction:column; gap:18px; align-items:center; text-align:center}
.row{display:flex; gap:12px; flex-wrap:wrap; justify-content:center}
.title{font-size:clamp(36px,9vw,56px); line-height:1.1; color:var(--gold);
  text-shadow:0 1px 0 #300, 0 2px 14px rgba(0,0,0,.6)}
.subtitle{opacity:.9}
.hint{opacity:.7; font-size:12px}

/* ---------- buttons ---------- */
.btn{border:none; padding:12px 18px; border-radius:999px; background:rgba(255,255,255,.12); color:#fff;
  backdrop-filter: blur(6px); border:1px solid rgba(255,255,255,.18)}
.btn:active{transform:translateY(1px)}
.btn.primary{background:linear-gradient(135deg, #871212, #d31f1f); border:1px solid rgba(255,255,255,.25)}

/* ---------- flip + tilt card ---------- */
.card{width:min(680px,92vw); min-height:240px; perspective:1000px; position:relative; transform-style:preserve-3d}
.card .face{
  border-radius:var(--radius); padding:24px; background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.25); box-shadow:0 10px 30px rgba(0,0,0,.3);
  backface-visibility:hidden; transition:transform .8s cubic-bezier(.2,.7,.2,1), background .3s;
}
.card .front{display:grid; place-items:center; font-weight:600; color:var(--gold); min-height:240px}
.card .back{position:absolute; inset:0; transform:rotateY(180deg)}
.card.revealed .front{transform:rotateY(180deg)}
.card.revealed .back{transform:rotateY(360deg)}
/* subtle tilt shadow */
.card.tilt .face{box-shadow:0 14px 40px rgba(0,0,0,.45)}

/* ---------- photos & lightbox ---------- */
.photos{display:grid; grid-template-columns:repeat(3,1fr); gap:8px}
.photos img{width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:12px;
  border:1px solid rgba(255,255,255,.2); cursor:zoom-in; transition:transform .2s}
.photos img:active{transform:scale(.98)}
dialog#lightbox{border:none; padding:0; background:rgba(0,0,0,.85)}
dialog[open]{display:grid; place-items:center}
dialog#lightbox img{max-width:92vw; max-height:70vh; border-radius:12px; margin:22px}
dialog#lightbox::backdrop{background:rgba(0,0,0,.65); backdrop-filter:blur(4px)}
#closeBox{margin:0 0 16px}

/* ---------- control dock ---------- */
.dock{
  position:fixed; right:8px; bottom:8px; z-index:10;
  background:rgba(0,0,0,.4); border:1px solid rgba(255,255,255,.2);
  border-radius:12px; padding:10px 12px; display:grid; gap:6px;
  font-size:12px; backdrop-filter:blur(8px)
}
.dock label{display:grid; gap:4px}
.dock input[type="range"]{width:140px}
.dock .small{grid-auto-flow:column; align-items:center}